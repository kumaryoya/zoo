<div class="main_image">
  <div class="image-container">
    <%= image_tag "top1.jpg", class: "fullscreen-image active", id: "image1" %>
    <%= image_tag "top2.jpg", class: "fullscreen-image", id: "image2" %>
    <%= image_tag "top3.jpg", class: "fullscreen-image", id: "image3" %>
    <%= image_tag "top4.jpg", class: "fullscreen-image", id: "image4" %>
    <%= image_tag "top5.jpg", class: "fullscreen-image", id: "image5" %>
  </div>
  <div class="items-center text-center pt-20 pb-10">
    <p class="text-4xl">ZooManiaでできること</p>
    <p class="text-2xl pt-10">ZooManiaは動物園に焦点を当てたWebサービスです</p>
    <div style="position: relative; text-align: center;" class="pt-10">
      <span style="display: flex; align-items: center; justify-content: center;" class="text-center text-xl">
        僕はこのアプリの案内係だゾゥ<br>
        よろしくだゾゥ<br>
      </span>
      <%= image_tag "animalface_zou.png", class: "message-image w-16 rounded-full mx-auto" %>
    </div>
  </div>
</div>
<section class="main_image items-center justify-center text-center">
  <div class="container mx-auto">
    <div class="flex flex-wrap justify-center pb-20">
      <div class="w-96 shadow-xl post_image rounded-lg m-3">
        <figure class="p-5"><%= image_tag "how6.jpg" %></figure>
        <div class="card-body items-center justify-center text-center flex space-between">
          <div class="flex items-center">
            <p class="text-xl link link-primary p-2"><%= link_to "動物園ライブラリ機能", zoos_path %></p>
          </div>
        </div>
      </div>
      <div class="w-96 shadow-xl post_image rounded-lg m-3">
        <figure class="p-5"><%= image_tag "how1.jpg" %></figure>
        <div class="card-body items-center justify-center text-center flex space-between">
          <div class="flex items-center">
            <p class="text-xl link link-primary p-2"><%= link_to "画像投稿機能", posts_path %></p>
          </div>
        </div>
      </div>
      <div class="w-96 shadow-xl post_image rounded-lg m-3">
        <figure class="p-5"><%= image_tag "how3.jpg" %></figure>
        <div class="card-body items-center justify-center text-center flex space-between">
          <div class="flex items-center">
            <p class="text-xl link link-primary p-2"><%= link_to "スタンプラリー機能", stamp_rally_posts_path %></p>
          </div>
        </div>
      </div>
      <div class="w-96 shadow-xl post_image rounded-lg m-3">
        <figure class="p-5"><%= image_tag "how5.jpg" %></figure>
        <div class="card-body items-center justify-center text-center flex space-between">
          <div class="flex items-center">
            <p class="text-xl link link-primary p-2"><%= link_to "お気に入り動物園登録機能", ranking_zoos_path %></p>
          </div>
        </div>
      </div>
      <div class="w-96 shadow-xl post_image rounded-lg m-3">
        <figure class="p-5"><%= image_tag "how4.jpg" %></figure>
        <div class="card-body items-center justify-center text-center flex space-between">
          <div class="flex items-center">
            <p class="text-xl link link-primary p-2"><%= link_to "動物園おすすめ機能", recommend_zoos_path %></p>
          </div>
        </div>
      </div>
      <div class="w-96 shadow-xl post_image rounded-lg m-3">
        <figure class="p-5"><%= image_tag "how2.jpg" %></figure>
        <div class="card-body items-center justify-center text-center flex space-between">
          <div class="flex items-center">
            <p class="text-xl link link-primary p-2"><%= link_to "LINE通知機能", "https://lin.ee/K5xZIFE" %></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<style>
  .image-container {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%;
    overflow: hidden;
  }
  .fullscreen-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transition: opacity 4s ease-in-out;
    opacity: 0;
  }
  .active {
    opacity: 1;
  }
</style>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const images = [
      "<%= asset_path('top1.jpg') %>",
      "<%= asset_path('top2.jpg') %>",
      "<%= asset_path('top3.jpg') %>",
      "<%= asset_path('top4.jpg') %>",
      "<%= asset_path('top5.jpg') %>",
    ];
    let currentIndex = 0;
    const imageElements = document.querySelectorAll(".fullscreen-image");
    function crossDissolve() {
      currentIndex = (currentIndex + 1) % images.length;
      const nextImagePath = images[currentIndex];
      const nextImageElement = imageElements[currentIndex];
      const currentImageElement = imageElements[currentIndex === 0 ? images.length - 1 : currentIndex - 1];
      nextImageElement.src = nextImagePath;
      currentImageElement.classList.remove("active");
      nextImageElement.classList.add("active");
      setTimeout(function () {
        crossDissolve();
      }, 8000);
    }
    crossDissolve();
  });
</script>
